generator client {
  provider = "prisma-client"
  output   = "../.generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = "file:../dev.db"
}

enum Currency {
  USD
  GTQ
  ARS
  RON
}

enum ExpenseMethod {
  CASH
  CARD
  TRANSFER
}

model ExpenseType {
  id          Int       @id @default(autoincrement())
  name        String
  description String?
  expense     Expense[]
}

model CategoryType {
  id          Int       @id @default(autoincrement())
  name        String
  description String?
  expense     Expense[]
}

model Expense {
  id             Int           @id @default(autoincrement())
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  merchant       String
  dateOfPurchase DateTime
  currency       Currency
  method         ExpenseMethod
  amount         Decimal
  memo           String?
  upload         String?
  categoryTypeId Int?
  expenseTypeId  Int?
  categoryType   CategoryType? @relation(fields: [categoryTypeId], references: [id])
  expenseType    ExpenseType?  @relation(fields: [expenseTypeId], references: [id])
}

model Registration {
  id        String    @id @default(cuid())
  email     String
  fName     String?
  lName     String?
  dob       DateTime?
  street    String?
  city      String?
  state     String?
  postal    String?
  phone     String?
  cName     String? // Church Name
  pName     String? // Primary Contact
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  @@index([email])
}
